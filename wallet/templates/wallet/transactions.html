{% extends 'wallet/wallet_header.html' %}
{% load static %}
{% block head-css-extension %}
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"/>
{% endblock %}
{% block main-content %}
    <input type="hidden" id="walletID" value="{{ wallet.pk }}">
    <div class="transaction-wrap">

        <div class="transaction-header">
            <span class="transaction-wallet-name">{{ object.name }}</span>
            <a class="btn-primary add-transaction-btn" style="text-decoration: none;"
               href="{% url 'wallet:wallet_transactions_create_transaction' object.pk %}">Add Transaction</a>
        </div>

        <div class="transaction-body">

            <div class="transaction-filter-block">

                <div class="statistic-card">
                    <span class="statistic-card-title">Filters</span>
                    <div class="statistics-block -filter">

                        <div class="statistic-input-box">
                            <span class="statistic-input-label">Category</span>
                            <div class="statistics-input-box-style">
                                <select class="statistics-filter">
                                    <option value="" disabled selected>All categories</option>
                                    <option value="1">Audi</option>
                                </select>
                            </div>
                        </div>

                        <div class="statistic-input-box">
                            <span class="statistic-input-label">Note</span>
                            <div class="statistics-input-box-style">
                                <input type="text" name="statistic-keyword-filter" id="statisticKeywordFilter"
                                       class="statistic-keyword-filter" placeholder="Filter by specific keyword">
                            </div>
                        </div>

                        <div class="statistic-input-box">
                            <span class="statistic-input-label">Date Range</span>
                            <div class="statistics-input-box-style">
                                <input type="text" name="statistic-keyword-filter" id="DateRangeFilter"
                                       class="statistic-keyword-filter" placeholder="Filter by specific keyword">
                            </div>
                        </div>

                    </div>
                </div>

            </div>

            <div class="transaction-finance-cards">

                <div class="statistic-card">
                    <span class="statistic-card-title">Total Balance</span>
                    <div class="statistics-block -finance">

                        <span class="statistic-amount">{{ object.balance.amount }}</span>

                    </div>
                </div>

                <div class="statistic-card">
                    <span class="statistic-card-title">Total Period expenses</span>
                    <div class="statistics-block -finance">

                        <span class="statistic-amount -expense-red" id="total-period-expenses">3000.00</span>

                    </div>
                </div>

                <div class="statistic-card">
                    <span class="statistic-card-title">Total Period Earnings</span>
                    <div class="statistics-block -finance">

                        <span class="statistic-amount" id="total-period-earnings">0.00</span>

                    </div>
                </div>
            </div>

            <div class="transaction-display-block">
                <div class="statistic-card">

                    <span class="statistic-card-title">March 1, 2020</span>

                    <div class="statistics-block">
                        <!--Display this div below if there are no transactions-->

                        {% for transaction in object.wallettransaction_set.all %}
                            <div class="transaction"> <!--This is one transaction line-->
                                <div class="transaction-type">
                                    <img class="transaction-icon" src="{% static "icons/bills.png" %}"
                                         alt="Transaction Icon">
                                    <span class="transaction-name">{{ transaction.category.name }}</span>
                                </div>

                                <div class="transaction-notes">
                                    {% if transaction.note %}
                                        {{ transaction.note }}
                                    {% else %}
                                        <!--If no notes display this div-->
                                        <div class="no-notes">
                                            <span class="note-empty-lines"></span>
                                            <span class="note-empty-lines"></span>
                                            <span class="note-empty-lines"></span>
                                        </div>
                                    {% endif %}

                                </div>

                                <div class="transaction-price">
                                    <span class="transaction-amount">{{ transaction.amount }}</span>
                                </div>

                                <div class="transaction-control">
                                    <a href="{% url 'wallet:wallet_transactions_update_transaction' transaction.pk %}"><img
                                            class="transaction-edit" src="{% static "icons/edit.png" %}" alt="edit"></a>
                                    <a href="#" id="delete-btn"
                                       onclick="delete_modal('{% url 'wallet:wallet_transactions_delete_transaction' transaction.pk %}','Are you sure you want to delete this transaction?')">
                                        <img class="transaction-delete" src="{% static "icons/delete.png" %}"
                                             alt="edit">
                                    </a>
                                </div>

                            </div>

                        {% empty %}

                            <div sata-attr-message="No Transactions." class="no-transactions-message">
                                To add a transaction, click Add Transaction on the upper right.
                            </div>

                        {% endfor %}


                    </div>

                </div>

            </div>


        </div>

    </div>

{% endblock %}

{% block delete-modal-block %}
    {% include 'delete_modal.html' %}
{% endblock %}



{% block body-javascript-extension %}
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
      <script src="{% static "js/wallet-transactions.js" %}"></script>
    <script>
        activeNavIcon("#sidenav-wallet", "#m-sidenav-wallet");
        activeWalletHeader("#header-transactions");
        $('input[id="DateRangeFilter"]').daterangepicker();
    </script>

{% endblock %}